@page "/paymentcuongclas/PaymentCuongClaList"
@using zEVRental.Repositories.CuongCLA.Models
@inject zEVRental.Services.CuongCLA.IServiceProviders _serviceProviders;
@inject NavigationManager Navigation
<h3>PaymentCuongClaList</h3>

@if (paymentCuongClaLists == null)
{
    <h2 class="text-danger fw-bold"> Page loading.....</h2>
}


else
{
    <a href="/PaymentCuongClas/PaymentCuongClaForm" class="btn btn-success"> Create</a>
    <table>
        <thead>
            <tr>
                <th>Id</th>
                <th>PaymentDate</th>
                <th>Amount</th>
                <th>PaymentMethod</th>
                <th>PaymentStatus</th>
                <th>Notes</th>
                <th>IsDeposit</th>
                <th>DepositReturnAmount</th>
                <th>Booking</th>
                <th>ProcessedByNavigation</th>
                <th>Actions</th>
            </tr>
        </thead>

        <tbody>
            @foreach(var item in paymentCuongClaLists)
            {
                <tr>
                    <td>@item.PaymentCuongClaid</td>
                    <td>@item.PaymentDate</td>
                    <td>@item.Amount</td>
                    <td>@item.PaymentMethod</td>
                    <td>@item.PaymentStatus</td>
                    <td>@item.Notes</td>
                    <td>@item.IsDeposit</td>
                    <td>@item.DepositReturnAmount</td>
                    <td>@item.Booking.Customer.FullName / @item.Booking.BookingCuongClaid</td>
                    <td>@item.ProcessedByNavigation.Email</td>
                    <td>
                        <button class="btn btn-primary btn-sm" @onclick="() => EditPayment(item.PaymentCuongClaid)">
                            Edit
                        </button>
                        <button class="btn btn-primary btn-sm" @onclick="() => ViewPayment(item.PaymentCuongClaid)">
                            View Detail
                        </button>
                    </td>
                </tr>
            }        
        </tbody>
    </table>
}
@code {
    private List<PaymentCuongCla> paymentCuongClaLists ;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            paymentCuongClaLists = await _serviceProviders._IpaymentCuongClaService.GetAllAsync();
            
        } catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

    }

    private void EditPayment(int paymentId)
    {
        Navigation.NavigateTo($"/PaymentCuongClas/PaymentCuongClaForm/{paymentId}");
    }

    private void ViewPayment(int paymentId)
    {
        Navigation.NavigateTo($"/PaymentCuongClas/PaymentCuongClaDetail/{paymentId}");
    }
}
